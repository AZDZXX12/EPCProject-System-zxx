# 个人设置和后端管理使用说明

## 📋 功能概览

系统新增了两个重要的管理功能：
1. **个人设置** - 管理个人资料和系统偏好
2. **后端管理** - 访问后端API和系统管理工具

---

## 🎯 1. 个人设置

### 访问方式

**方法1**: 点击右上角用户头像 → 选择"个人设置"  
**方法2**: 直接访问 http://localhost:3000/settings

### 功能模块

#### 📝 个人资料
- **头像管理** - 上传和更换个人头像
- **基本信息**:
  - 用户名（不可修改）
  - 真实姓名
  - 邮箱地址
  - 手机号码
  - 所属部门
  - 职位信息

**使用方法**:
1. 填写或修改个人信息
2. 点击"保存修改"按钮
3. 系统显示更新成功提示

#### 🔒 安全设置
- **修改密码**:
  1. 输入当前密码
  2. 输入新密码（至少6位）
  3. 确认新密码
  4. 点击"修改密码"按钮
  
- **登录设备管理**:
  - 查看当前登录设备
  - 查看最后登录时间
  - 强制下线其他设备

#### 🔔 通知设置
可以开启/关闭以下通知：

**系统通知**:
- ✅ 项目进度更新通知
- ✅ 设备安装提醒
- ✅ 安全预警通知
- ✅ 质量检测通知

**邮件通知**:
- 📧 每日工作汇总（18:00）
- 📧 周报推送（每周五）

#### ⚙️ 系统设置
- **显示设置**:
  - 深色模式开关
  - 侧边栏折叠设置
  
- **语言设置**:
  - 界面语言选择
  
- **系统信息**:
  - 系统版本: v2.0.0
  - 构建时间
  - 后端API地址
  - API文档链接

---

## 🔌 2. 后端管理

### 访问方式

**方法1**: 侧边栏底部 → "后端管理"  
**方法2**: 直接访问 http://localhost:3000/system-management

### 功能说明

#### 📊 系统统计
显示系统运行状态的关键指标：
- **API端点数**: 25个
- **数据库表**: 8个
- **注册用户**: 12人
- **系统版本**: v2.0.0

#### 🛠️ 后端管理工具

##### 1. Swagger UI
- **地址**: http://localhost:8000/docs
- **功能**: 交互式API文档
- **特点**:
  - 📝 查看所有API接口
  - 🧪 直接测试API
  - 📋 查看请求/响应格式
  - 🔐 支持认证测试

**使用方法**:
1. 点击"打开 Swagger UI"按钮
2. 浏览器新标签页打开API文档
3. 选择API端点
4. 点击"Try it out"测试
5. 填写参数后点击"Execute"
6. 查看返回结果

##### 2. ReDoc
- **地址**: http://localhost:8000/redoc
- **功能**: 美观的API文档阅读界面
- **特点**:
  - 📖 更好的阅读体验
  - 🎨 现代化设计
  - 📑 清晰的分类
  - 🔍 强大的搜索

##### 3. 数据库管理
- **位置**: `server/data/epc_system.db`
- **类型**: SQLite数据库
- **访问**: 可使用SQLite工具直接访问

#### 📚 API端点分类

##### 项目管理 API
```
GET    /api/v1/projects/     获取项目列表
POST   /api/v1/projects/     创建项目
PUT    /api/v1/projects/:id  更新项目
DELETE /api/v1/projects/:id  删除项目
```

##### 设备管理 API
```
GET    /api/v1/devices/      获取设备列表
POST   /api/v1/devices/      添加设备
PUT    /api/v1/devices/:id   更新设备
DELETE /api/v1/devices/:id   删除设备
```

##### 任务管理 API
```
GET    /api/v1/tasks/        获取任务列表
POST   /api/v1/tasks/        创建任务
PUT    /api/v1/tasks/:id     更新任务
DELETE /api/v1/tasks/:id     删除任务
```

##### 用户认证 API
```
POST   /api/auth/login       用户登录
POST   /api/auth/logout      用户登出
GET    /api/auth/me          获取当前用户
PUT    /api/auth/password    修改密码
```

#### ⚙️ 系统配置信息

```
前端地址: http://localhost:3000
后端地址: http://localhost:8000
数据库:   SQLite (server/data/epc_system.db)
备份目录: server/data/backup/
日志目录: server/logs/
```

---

## 🎓 使用场景

### 场景1: 修改个人信息
```
用户操作流程:
1. 点击右上角头像
2. 选择"个人设置"
3. 在"个人资料"标签修改信息
4. 保存修改
```

### 场景2: 修改登录密码
```
用户操作流程:
1. 进入"个人设置"
2. 切换到"安全设置"标签
3. 填写当前密码和新密码
4. 点击"修改密码"
5. 重新登录系统
```

### 场景3: 设置消息通知
```
用户操作流程:
1. 进入"个人设置"
2. 切换到"通知设置"标签
3. 开启/关闭所需通知
4. 设置自动保存
```

### 场景4: 测试API接口
```
开发者操作流程:
1. 进入"后端管理"页面
2. 点击"打开 Swagger UI"
3. 选择要测试的API端点
4. 点击"Try it out"
5. 填写测试参数
6. 执行并查看结果
```

### 场景5: 查看API文档
```
开发者操作流程:
1. 进入"后端管理"页面
2. 点击"打开 ReDoc"
3. 浏览API文档
4. 搜索特定接口
5. 查看详细说明
```

---

## 🔐 权限说明

### 个人设置
- ✅ 所有登录用户可访问
- ✅ 可修改自己的信息
- ❌ 无法修改用户名

### 后端管理
- ✅ 管理员账号可访问
- ✅ 可查看所有API文档
- ✅ 可测试所有接口
- ⚠️ 需要后端服务运行

---

## 📝 注意事项

### 个人设置
1. **头像上传** - 目前功能开发中
2. **密码修改** - 修改后需重新登录
3. **邮箱验证** - 请输入有效邮箱地址
4. **通知设置** - 实时生效

### 后端管理
1. **后端运行** - 确保后端服务已启动（端口8000）
2. **API测试** - 某些API需要认证token
3. **数据库访问** - 直接修改数据库需谨慎
4. **备份恢复** - 定期备份重要数据

---

## 🐛 常见问题

### Q1: 打不开Swagger UI？
**A**: 
1. 确认后端服务已启动
2. 访问 http://localhost:8000 检查后端
3. 检查防火墙设置
4. 查看后端日志排查错误

### Q2: 修改个人信息没有保存？
**A**: 
1. 检查浏览器控制台错误
2. 确认后端API连接正常
3. 刷新页面重试

### Q3: 忘记密码怎么办？
**A**: 
目前需要联系系统管理员重置密码。后续版本会添加"忘记密码"功能。

### Q4: API测试返回401错误？
**A**: 
该API需要认证。在Swagger UI中：
1. 点击页面顶部"Authorize"按钮
2. 输入登录token
3. 点击"Authorize"确认
4. 重新测试API

### Q5: 数据库文件在哪里？
**A**: 
数据库文件位于: `server/data/epc_system.db`

可以使用以下工具查看：
- SQLite Browser
- DBeaver
- DataGrip

---

## 🚀 快速开始

### 5分钟上手指南

**Step 1**: 登录系统
```
访问: http://localhost:3000/login
账号: admin / admin123
```

**Step 2**: 完善个人信息
```
1. 点击右上角头像
2. 选择"个人设置"
3. 填写真实姓名和邮箱
4. 保存修改
```

**Step 3**: 设置通知偏好
```
1. 切换到"通知设置"
2. 开启需要的通知类型
3. 自动保存
```

**Step 4**: 体验后端管理
```
1. 侧边栏点击"后端管理"
2. 点击"打开 Swagger UI"
3. 浏览API文档
4. 测试简单接口
```

---

## 📞 技术支持

### 获取帮助
- 📖 查看在线文档
- 🐛 提交Issue反馈
- 💬 联系系统管理员

### 反馈渠道
- **系统内反馈**: 开发中...
- **邮件反馈**: support@epc-system.com
- **问题追踪**: GitHub Issues

---

**文档版本**: v1.0  
**最后更新**: 2025-10-18  
**适用版本**: EPC项目管理系统 v2.0.0+  

---

**© 2025 EPC Project Management System**  
**Engineering · Procurement · Construction**


