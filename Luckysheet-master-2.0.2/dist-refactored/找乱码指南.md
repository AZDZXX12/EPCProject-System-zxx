# 🔍 找出乱码的来源

## 问题描述

您看到：
```
第 1 页 / 共 3 页
{ 1 u / Qq 3 u      ← 这个乱码是什么？
```

## 📋 请按照以下步骤操作

### 步骤1：打开PDF预览

1. 访问 http://localhost:8000/index.html
2. 填写一些数据
3. 点击"导出PDF"按钮
4. 看到预览对话框

---

### 步骤2：打开开发者工具

1. **在预览对话框中**按 `F12`
2. 点击 **Console** 标签

---

### 步骤3：运行检查脚本

1. 打开这个文件：`inspect-pdf-preview.js`
2. **全选** 文件内容 (Ctrl+A)
3. **复制** (Ctrl+C)
4. 在Console中**粘贴** (Ctrl+V)
5. 按 **Enter** 运行

---

### 步骤4：查看输出

脚本会显示：
```
🔍 开始检查PDF预览页面结构...
📊 找到 X 个页码元素

=== 页码 1 ===
textContent: ...
innerHTML: ...
outerHTML: ...
子节点数量: ...
```

---

### 步骤5：截图并发给我

请截图以下内容：
1. ✅ 预览对话框的页码部分（显示乱码的地方）
2. ✅ Console中的所有输出
3. ✅ Elements标签中的页码元素HTML

---

## 🎯 另一个方法：使用元素选择器

1. 在预览对话框中按 `F12`
2. 点击 **Elements** 标签
3. 点击左上角的**选择元素按钮**（或按Ctrl+Shift+C）
4. 用鼠标**点击那个乱码**
5. 查看被选中的HTML元素
6. **截图告诉我**：
   - 元素的标签名
   - 元素的class/id
   - 元素的内容
   - 元素的父元素

---

## 💡 可能的原因

根据乱码 `{ 1 u / Qq 3 u` 的特征，可能是：

### 1. 字体fallback问题
某些特殊字符被渲染成了替代字符

### 2. 另一个隐藏的元素
可能有两个页码元素叠在一起

### 3. CSS伪元素
可能有 `::before` 或 `::after` 添加了额外内容

### 4. 库的调试信息
某个JavaScript库可能添加了调试元素

### 5. 字符编码问题
UTF-8编码问题导致某些字符显示错误

---

## 🚀 快速检查命令

在PDF预览对话框的Console中运行：

```javascript
// 检查所有页码元素
document.querySelectorAll('.page-num').forEach((elem, i) => {
  console.log(`页码 ${i+1}:`, elem.textContent, elem.outerHTML);
});

// 检查是否有重复的文本
const text = document.body.textContent;
console.log('页码出现次数:', (text.match(/\d+\s*\/\s*\d+/g) || []).length);

// 查找包含奇怪字符的元素
document.querySelectorAll('*').forEach(elem => {
  if (elem.textContent.includes('Qq') || elem.textContent.includes('{ 1')) {
    console.log('找到可疑元素:', elem.outerHTML);
  }
});
```

---

## 📞 请告诉我

运行上述脚本后，请告诉我：
1. 找到了几个 `.page-num` 元素？
2. 每个元素的 `textContent` 是什么？
3. 是否有伪元素（::before或::after）？
4. 是否找到了包含 `Qq` 或 `{ 1` 的元素？

这样我才能准确定位问题并修复！🔧

