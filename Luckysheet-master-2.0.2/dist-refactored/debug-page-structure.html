<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>é¡µé¢ç»“æ„è°ƒè¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .box {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        pre {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        .preview-container {
            border: 2px solid #2196F3;
            padding: 20px;
            margin: 10px 0;
            min-height: 200px;
        }
        .page-num-test {
            position: relative;
            border: 1px solid #ddd;
            padding: 20px;
            margin: 10px 0;
            min-height: 150px;
        }
        .page-num {
            position: absolute;
            bottom: 15px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 11px;
            color: #999;
            background: white;
            padding: 5px 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ” é¡µé¢ç»“æ„è°ƒè¯•</h1>

    <div class="box">
        <h2>æµ‹è¯•1ï¼šæ£€æŸ¥é¡µç å…ƒç´ </h2>
        <div class="preview-container" id="testContainer1">
            <div class="page-num-test">
                <p>è¿™æ˜¯æµ‹è¯•å†…å®¹</p>
                <div class="page-num" id="testPageNum">ç¬¬ 1 é¡µ / å…± 3 é¡µ</div>
            </div>
        </div>
        <button onclick="inspectPageNum()">æ£€æŸ¥é¡µç å…ƒç´ </button>
        <pre id="pageNumResult"></pre>
    </div>

    <div class="box">
        <h2>æµ‹è¯•2ï¼šæ£€æŸ¥æ‰€æœ‰å­å…ƒç´ </h2>
        <button onclick="checkAllElements()">æ£€æŸ¥æ‰€æœ‰å…ƒç´ </button>
        <pre id="allElementsResult"></pre>
    </div>

    <div class="box">
        <h2>æµ‹è¯•3ï¼šæ£€æŸ¥è®¡ç®—åçš„æ ·å¼</h2>
        <button onclick="checkComputedStyle()">æ£€æŸ¥æ ·å¼</button>
        <pre id="styleResult"></pre>
    </div>

    <div class="box">
        <h2>æµ‹è¯•4ï¼šæ£€æŸ¥æ˜¯å¦æœ‰ä¼ªå…ƒç´ </h2>
        <button onclick="checkPseudoElements()">æ£€æŸ¥ä¼ªå…ƒç´ </button>
        <pre id="pseudoResult"></pre>
    </div>

    <div class="box">
        <h2>æµ‹è¯•5ï¼šæ‰“å¼€PDFé¢„è§ˆå¹¶æ£€æŸ¥</h2>
        <p>è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
        <ol>
            <li>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®æ‰“å¼€ä¸»é¡µ</li>
            <li>ç‚¹å‡»"å¯¼å‡ºPDF"</li>
            <li>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
            <li>åœ¨Elementsæ ‡ç­¾ä¸­æ‰¾åˆ°class="page-num"çš„å…ƒç´ </li>
            <li>æŸ¥çœ‹å®ƒçš„HTMLç»“æ„å’Œå†…å®¹</li>
            <li>æˆªå›¾å‘Šè¯‰æˆ‘</li>
        </ol>
        <button onclick="window.open('http://localhost:8000/index.html')">æ‰“å¼€ä¸»é¡µ</button>
    </div>

    <script>
        function inspectPageNum() {
            const elem = document.getElementById('testPageNum');
            const result = document.getElementById('pageNumResult');
            
            const info = {
                'tagName': elem.tagName,
                'className': elem.className,
                'textContent': elem.textContent,
                'innerHTML': elem.innerHTML,
                'childNodes': elem.childNodes.length,
                'children': elem.children.length,
                'nodeType': elem.nodeType,
                'outerHTML': elem.outerHTML
            };
            
            // æ£€æŸ¥å­èŠ‚ç‚¹
            const children = [];
            for (let i = 0; i < elem.childNodes.length; i++) {
                const child = elem.childNodes[i];
                children.push({
                    type: child.nodeType === 1 ? 'ELEMENT' : child.nodeType === 3 ? 'TEXT' : 'OTHER',
                    name: child.nodeName,
                    content: child.nodeType === 3 ? child.nodeValue : child.outerHTML
                });
            }
            info.childrenDetails = children;
            
            result.textContent = JSON.stringify(info, null, 2);
            console.log('é¡µç å…ƒç´ ä¿¡æ¯:', info);
        }

        function checkAllElements() {
            const container = document.getElementById('testContainer1');
            const result = document.getElementById('allElementsResult');
            
            function getElementTree(elem, depth = 0) {
                let output = '  '.repeat(depth) + `<${elem.tagName}`;
                if (elem.className) output += ` class="${elem.className}"`;
                output += '>\n';
                
                for (let i = 0; i < elem.childNodes.length; i++) {
                    const child = elem.childNodes[i];
                    if (child.nodeType === 1) {
                        output += getElementTree(child, depth + 1);
                    } else if (child.nodeType === 3 && child.nodeValue.trim()) {
                        output += '  '.repeat(depth + 1) + `TEXT: "${child.nodeValue.trim()}"\n`;
                    }
                }
                
                return output;
            }
            
            result.textContent = getElementTree(container);
        }

        function checkComputedStyle() {
            const elem = document.getElementById('testPageNum');
            const result = document.getElementById('styleResult');
            const computed = window.getComputedStyle(elem);
            
            const styles = {
                'position': computed.position,
                'bottom': computed.bottom,
                'left': computed.left,
                'right': computed.right,
                'text-align': computed.textAlign,
                'font-size': computed.fontSize,
                'color': computed.color,
                'background': computed.background,
                'padding': computed.padding,
                'display': computed.display,
                'content': computed.content
            };
            
            result.textContent = JSON.stringify(styles, null, 2);
        }

        function checkPseudoElements() {
            const elem = document.getElementById('testPageNum');
            const result = document.getElementById('pseudoResult');
            
            const before = window.getComputedStyle(elem, '::before');
            const after = window.getComputedStyle(elem, '::after');
            
            const info = {
                '::before': {
                    content: before.content,
                    display: before.display,
                    visible: before.content !== 'none' && before.content !== '""'
                },
                '::after': {
                    content: after.content,
                    display: after.display,
                    visible: after.content !== 'none' && after.content !== '""'
                }
            };
            
            result.textContent = JSON.stringify(info, null, 2);
            console.log('ä¼ªå…ƒç´ ä¿¡æ¯:', info);
        }

        // è‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•
        window.addEventListener('load', function() {
            setTimeout(function() {
                console.log('=== è‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯• ===');
                inspectPageNum();
                checkAllElements();
                checkComputedStyle();
                checkPseudoElements();
            }, 1000);
        });
    </script>
</body>
</html>

