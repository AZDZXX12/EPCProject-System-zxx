# ğŸ“¦ EPCé¡¹ç›®ç®¡ç†ç³»ç»Ÿ - ç”Ÿäº§éƒ¨ç½²æŒ‡å—

## ğŸ¯ éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚ â”€â”€â”€> â”‚  åç«¯ (FastAPI)  â”‚
â”‚  Render/Vercel  â”‚      â”‚     Render      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚   SQLite    â”‚
                         â”‚  (æŒä¹…åŒ–)    â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥éª¤

### 1. åç«¯éƒ¨ç½² (Render)

#### 1.1 å‡†å¤‡å·¥ä½œ
- æ³¨å†Œ [Render](https://render.com) è´¦å·
- å°†ä»£ç æ¨é€åˆ° GitHub

#### 1.2 åˆ›å»ºWeb Service
1. ç™»å½• Render Dashboard
2. ç‚¹å‡» "New +" â†’ "Web Service"
3. è¿æ¥ GitHub ä»“åº“
4. é…ç½®å¦‚ä¸‹ï¼š

```yaml
Name: chemical-backend
Environment: Python 3
Build Command: pip install -r server/requirements.txt
Start Command: cd server && python quick-start-sqlite.py
```

#### 1.3 ç¯å¢ƒå˜é‡é…ç½®
åœ¨ Render Dashboard æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

```bash
# å…è®¸çš„å‰ç«¯åŸŸåï¼ˆç”¨é€—å·åˆ†éš”ï¼‰
ALLOWED_ORIGINS=https://your-frontend-domain.onrender.com,https://your-custom-domain.com

# ç«¯å£ï¼ˆRenderè‡ªåŠ¨æä¾›ï¼‰
PORT=8000
```

#### 1.4 æŒä¹…åŒ–å­˜å‚¨
åœ¨ Render Dashboard é…ç½®ï¼š
- Disk Name: `epc-data`
- Mount Path: `/opt/render/project/src/server/data`
- Size: 1GB (å…è´¹å¥—é¤)

### 2. å‰ç«¯éƒ¨ç½² (Render/Vercel)

#### æ–¹æ¡ˆA: Renderéƒ¨ç½²

1. åˆ›å»º Static Site
2. é…ç½®ï¼š

```yaml
Name: chemical-frontend
Build Command: cd client && npm install && npm run build
Publish Directory: client/build
```

3. ç¯å¢ƒå˜é‡ï¼š

```bash
REACT_APP_API_URL=https://chemical-backend.onrender.com
NODE_ENV=production
```

#### æ–¹æ¡ˆB: Verceléƒ¨ç½²

1. å®‰è£… Vercel CLI:
```bash
npm install -g vercel
```

2. åœ¨ `client` ç›®å½•æ‰§è¡Œï¼š
```bash
cd client
vercel --prod
```

3. åœ¨ Vercel Dashboard é…ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
REACT_APP_API_URL=https://chemical-backend.onrender.com
```

### 3. åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼‰

#### 3.1 è‡ªå®šä¹‰åŸŸå
åœ¨ Render/Vercel Dashboard:
1. Settings â†’ Custom Domains
2. æ·»åŠ åŸŸå: `epc.yourdomain.com`
3. é…ç½® DNS CNAME è®°å½•

#### 3.2 SSLè¯ä¹¦
Render/Vercel è‡ªåŠ¨æä¾›å…è´¹SSLè¯ä¹¦

## ğŸ”§ æœ¬åœ°å¼€å‘é…ç½®

### å‰ç«¯é…ç½®
åˆ›å»º `client/.env.local`:

```bash
# æœ¬åœ°å¼€å‘ä½¿ç”¨æœ¬åœ°åç«¯
REACT_APP_API_URL=http://localhost:8000
NODE_ENV=development
```

### åç«¯é…ç½®
åˆ›å»º `server/.env`:

```bash
# æœ¬åœ°å¼€å‘å…è®¸æ‰€æœ‰localhost
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000,http://127.0.0.1:3001
PORT=8000
```

## ğŸ“Š ç¯å¢ƒåˆ‡æ¢é€»è¾‘

ç³»ç»Ÿå·²ä¼˜åŒ–ä¸ºæ™ºèƒ½ç¯å¢ƒåˆ‡æ¢ï¼š

### å‰ç«¯ (`client/src/config.ts`)
```typescript
// âœ… è‡ªåŠ¨æ£€æµ‹
const isLocalhost = window.location.hostname === 'localhost';

// æœ¬åœ°å¼€å‘ -> http://localhost:8000
// ç”Ÿäº§ç¯å¢ƒ -> https://chemical-backend.onrender.com
export const API_BASE_URL = isLocalhost 
  ? 'http://localhost:8000' 
  : process.env.REACT_APP_API_URL;
```

### åç«¯ (`server/quick-start-sqlite.py`)
```python
# âœ… ä»ç¯å¢ƒå˜é‡è¯»å–CORSé…ç½®
ALLOWED_ORIGINS = os.environ.get("ALLOWED_ORIGINS", "").split(",")
```

## ğŸ” å®‰å…¨é…ç½®

### 1. CORSé…ç½®
åç«¯å·²ä¼˜åŒ–CORSï¼Œæ”¯æŒï¼š
- âœ… æ˜ç¡®æŒ‡å®šå…è®¸çš„æºï¼ˆä¸ä½¿ç”¨ `*`ï¼‰
- âœ… æ”¯æŒ `credentials: include`
- âœ… é¢„æ£€è¯·æ±‚ç¼“å­˜

### 2. è®¤è¯é…ç½®
å½“å‰ä½¿ç”¨ç®€å•è®¤è¯ï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š
- ç”¨æˆ·å: `admin`
- å¯†ç : `admin123`

**ç”Ÿäº§ç¯å¢ƒå»ºè®®**ï¼š
- ä½¿ç”¨ JWT Token
- æ·»åŠ å¯†ç åŠ å¯†
- å®ç°ç”¨æˆ·æƒé™ç®¡ç†

### 3. æ•°æ®åº“å®‰å…¨
- âœ… SQLite WALæ¨¡å¼
- âœ… äº‹åŠ¡ç®¡ç†
- âœ… å‚æ•°åŒ–æŸ¥è¯¢ï¼ˆé˜²SQLæ³¨å…¥ï¼‰

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### éƒ¨ç½²å‰
- [ ] ä»£ç å·²æ¨é€åˆ° GitHub
- [ ] ç¯å¢ƒå˜é‡å·²é…ç½®
- [ ] ä¾èµ–åŒ…ç‰ˆæœ¬å·²é”å®š
- [ ] æµ‹è¯•é€šè¿‡

### éƒ¨ç½²å
- [ ] å‰ç«¯å¯è®¿é—®
- [ ] åç«¯APIæ­£å¸¸
- [ ] CORSé…ç½®æ­£ç¡®
- [ ] ç™»å½•åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®æŒä¹…åŒ–å·¥ä½œ
- [ ] SSLè¯ä¹¦æœ‰æ•ˆ

## ğŸ› å¸¸è§é—®é¢˜

### 1. CORSé”™è¯¯
**é—®é¢˜**: `Access-Control-Allow-Origin` é”™è¯¯

**è§£å†³**:
```bash
# åç«¯ç¯å¢ƒå˜é‡æ·»åŠ å‰ç«¯åŸŸå
ALLOWED_ORIGINS=https://your-frontend.onrender.com
```

### 2. ç™»å½•å¤±è´¥
**é—®é¢˜**: ä¸€ç›´æ˜¾ç¤º"éªŒè¯ä¸­"

**æ£€æŸ¥**:
1. åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œ
2. å‰ç«¯APIåœ°å€æ˜¯å¦æ­£ç¡®
3. CORSé…ç½®æ˜¯å¦åŒ…å«å‰ç«¯åŸŸå

### 3. æ•°æ®ä¸¢å¤±
**é—®é¢˜**: é‡å¯åæ•°æ®æ¶ˆå¤±

**è§£å†³**: 
- Render: é…ç½®æŒä¹…åŒ–ç£ç›˜
- è·¯å¾„: `/opt/render/project/src/server/data`

### 4. æ„å»ºå¤±è´¥
**é—®é¢˜**: npm install å¤±è´¥

**è§£å†³**:
```bash
# åˆ é™¤ node_modules å’Œ package-lock.json
rm -rf node_modules package-lock.json
npm install
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- âœ… ä»£ç åˆ†å‰² (React.lazy)
- âœ… å›¾ç‰‡æ‡’åŠ è½½
- âœ… Gzipå‹ç¼©
- âœ… CDNåŠ é€Ÿ

### åç«¯ä¼˜åŒ–
- âœ… SQLite WALæ¨¡å¼
- âœ… è¿æ¥æ± ä¼˜åŒ–
- âœ… æŸ¥è¯¢ç´¢å¼•
- âœ… Gzipå‹ç¼©

## ğŸ”„ æ›´æ–°éƒ¨ç½²

### è‡ªåŠ¨éƒ¨ç½²
Render/Vercel æ”¯æŒ GitHub è‡ªåŠ¨éƒ¨ç½²ï¼š
1. æ¨é€ä»£ç åˆ° main åˆ†æ”¯
2. è‡ªåŠ¨è§¦å‘æ„å»ºå’Œéƒ¨ç½²
3. å‡ åˆ†é’Ÿåç”Ÿæ•ˆ

### æ‰‹åŠ¨éƒ¨ç½²
```bash
# Vercel
cd client
vercel --prod

# Render
# åœ¨ Dashboard ç‚¹å‡» "Manual Deploy"
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æ–‡æ¡£èµ„æº
- [Renderæ–‡æ¡£](https://render.com/docs)
- [Vercelæ–‡æ¡£](https://vercel.com/docs)
- [FastAPIæ–‡æ¡£](https://fastapi.tiangolo.com)
- [Reactæ–‡æ¡£](https://react.dev)

### ç›‘æ§å·¥å…·
- Render Dashboard: æŸ¥çœ‹æ—¥å¿—å’Œæ€§èƒ½
- Vercel Analytics: å‰ç«¯æ€§èƒ½ç›‘æ§
- Sentry: é”™è¯¯è¿½è¸ªï¼ˆå¯é€‰ï¼‰

---

## âœ… éƒ¨ç½²å®ŒæˆéªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ï¼š
- å‰ç«¯: `https://your-frontend.onrender.com`
- åç«¯API: `https://your-backend.onrender.com/docs`
- ç™»å½•: `admin / admin123`

ğŸ‰ **æ­å–œï¼ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼**
