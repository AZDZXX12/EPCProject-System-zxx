# EPC项目管理系统 - 使用说明
## Engineering · Procurement · Construction

---

## 🎯 系统简介

**EPC项目管理系统**是专业的工程总承包项目管理平台，适用于化工、石化、电力、冶金等工业领域。

### 什么是EPC？
- **E** - Engineering（工程设计）
- **P** - Procurement（设备采购）
- **C** - Construction（施工建设）

---

## 🚀 快速启动

### Windows系统

#### 方法1：一键启动（推荐）
```bash
# 双击运行批处理文件
启动.bat

# 或右键使用PowerShell运行
启动.ps1
```

#### 方法2：手动启动
```bash
# 后端服务
cd server
venv\Scripts\activate
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000

# 前端服务（新终端）
cd client
npm start
```

---

## 📋 系统要求

### 硬件配置
- **CPU**: 双核 2.0GHz 以上
- **内存**: 4GB RAM（推荐 8GB）
- **硬盘**: 2GB 可用空间
- **显卡**: 支持 WebGL

### 软件环境
- **操作系统**: Windows 10/11, macOS, Linux
- **Python**: 3.8 ~ 3.11
- **Node.js**: 14.x ~ 18.x
- **浏览器**: Chrome 90+, Edge 90+ (推荐Chrome)

### 网络端口
- **3000** - 前端开发服务器
- **8000** - 后端API服务器

---

## 🔧 首次运行准备

### 1. 安装Python依赖
```bash
cd server
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
```

### 2. 安装Node.js依赖
```bash
cd client
npm install
```

### 3. 检查端口占用
```bash
netstat -ano | findstr ":3000"
netstat -ano | findstr ":8000"
```

如有占用，终止进程：
```bash
taskkill /F /PID [进程ID]
```

---

## 🔐 登录系统

### 默认管理员账号
```
用户名: admin
密码:   admin123
权限:   系统管理员（全部功能）
```

### 登录步骤
1. 打开浏览器访问 http://localhost:3000/login
2. 输入用户名和密码
3. 点击"登录系统"按钮
4. 自动跳转至数字孪生驾驶舱

---

## 📦 核心功能模块

### 🎨 数字孪生驾驶舱
**访问路径**: 主菜单 → 数字孪生驾驶舱

**功能特点**:
- 🌐 3D场景可视化展示
- 📊 项目实时数据看板
- 📝 系统动态日志流
- 🎯 快速功能导航

**适用场景**: 项目总览、数据监控、高层汇报

---

### 📐 E - Engineering (工程设计管理)

#### 1. EPC工程概览
**访问路径**: 主菜单 → EPC工程概览

**功能**:
- 项目统计卡片（总数、进行中、已完成、平均进度）
- 项目进度列表
- 最新动态时间轴
- 安全天数和质量合格率

#### 2. 项目管理 (E)
**访问路径**: 主菜单 → 项目管理 (E)

**功能**:
- 新建工程项目
- 编辑项目信息
- 查看项目详情
- 删除已完成项目
- 项目状态管理

**操作流程**:
1. 点击"新建项目"按钮
2. 填写项目信息（名称、编号、描述、日期等）
3. 选择项目状态
4. 保存提交

#### 3. 技术文档库
**访问路径**: 主菜单 → 技术文档库

**功能**:
- 设计图纸管理
- 技术规范文档
- 变更记录追踪
- 文档版本控制
- 在线预览下载

**文档分类**:
- 设计图纸
- 施工方案
- 技术标准
- 质量文件
- 竣工资料

---

### 🛒 P - Procurement (设备采购管理)

#### 1. 设备选型采购 (P)
**访问路径**: 主菜单 → 设备选型采购 (P)

**功能**:
- 🌀 **风机选型工具** - 根据风量、风压自动选型
- ⚙️ **泵类设备选型** - 流量、扬程智能匹配
- 🔥 **换热器选型** - 传热面积计算
- 📊 **Excel数据导入** - 批量导入设备清单
- 💾 **Excel数据导出** - 导出选型结果

**选型流程**:
1. 选择设备类型（风机/泵/换热器）
2. 输入工况参数（流量、压力、温度等）
3. 系统自动计算匹配
4. 查看推荐设备型号
5. 导出选型报告

**数据管理**:
- 导入现有设备清单（Excel）
- 在线编辑设备参数
- 导出选型结果
- 打印选型报告

---

### 🏗️ C - Construction (施工建设管理)

#### 1. 施工进度甘特图 (C)
**访问路径**: 主菜单 → 施工进度甘特图 (C)

**功能**:
- 📅 **可视化进度计划** - 时间轴甘特图展示
- 🔗 **任务依赖关系** - 前置任务关联
- 📊 **关键路径分析** - 自动识别关键任务
- 🎯 **进度偏差预警** - 延期风险提示
- 🖱️ **拖拽调整计划** - 可视化编辑
- 📄 **PDF/Excel导出** - 导出进度报表

**操作说明**:
1. **新建任务**: 点击"添加任务"按钮
2. **编辑任务**: 双击任务条进行编辑
3. **设置依赖**: 拖拽连接线建立依赖关系
4. **调整时间**: 拖动任务条两端调整日期
5. **查看详情**: 点击任务查看详细信息
6. **导出报表**: 点击导出按钮生成PDF/Excel

**每日工作量记录**:
- 施工部位详细记录
- 人工工时统计
- 材料消耗追踪
- 完成情况确认

#### 2. 设备安装管理 (C)
**访问路径**: 主菜单 → 设备安装管理 (C)

**功能**:
- 设备清单管理
- 安装任务分配
- 安装进度监控
- 质量验收记录
- 状态预警提醒

**设备状态**:
- 🟢 **已安装** - 完成安装和验收
- 🟡 **安装中** - 正在施工
- 🔴 **待安装** - 等待开始
- ⚫ **已验收** - 通过质量验收

**操作流程**:
1. 导入设备清单
2. 分配安装任务
3. 更新安装进度
4. 记录验收结果
5. 生成安装报表

---

### 🛡️ HSE管理（健康·安全·环境）

#### 1. HSE安全管理
**访问路径**: 主菜单 → HSE安全管理

**功能**:
- 安全规章制度库
- 安全教育培训记录
- 事故隐患排查
- 应急预案管理
- 安全统计分析

**安全记录**:
- 安全检查记录
- 隐患整改追踪
- 安全培训档案
- 事故调查报告
- 应急演练记录

#### 2. HSE质量检测
**访问路径**: 主菜单 → HSE质量检测

**功能**:
- 质量检测记录
- 不合格品处理
- 质量统计分析
- 合格率追踪
- 质量报表生成

**检测类型**:
- 材料检验
- 焊接检测
- 压力试验
- 无损检测
- 性能测试

---

### 👥 人员管理
**访问路径**: 主菜单 → 人员管理

**功能**:
- 施工人员档案
- 资质证书管理
- 考勤打卡记录
- 培训记录管理
- 人员统计报表

**人员信息**:
- 基本信息（姓名、性别、年龄）
- 联系方式
- 工种职务
- 证书资质（有效期）
- 培训经历
- 考勤记录

---

## 🛑 停止系统

### 方法1：关闭窗口
启动后会打开三个窗口：
1. 主控制窗口
2. 后端服务窗口
3. 前端服务窗口

直接关闭后端和前端窗口即可停止服务。

### 方法2：任务管理器
1. 按 `Ctrl + Shift + Esc` 打开任务管理器
2. 找到 `python.exe`（后端）
3. 找到 `node.exe`（前端）
4. 右键 → 结束任务

### 方法3：命令行
```bash
# 停止Python进程（谨慎使用）
taskkill /F /IM python.exe

# 停止Node进程（谨慎使用）
taskkill /F /IM node.exe
```

---

## 🐛 常见问题

### Q1: 启动时端口被占用
**现象**: 提示端口3000或8000已被占用

**解决方案**:
```bash
# 查找占用进程
netstat -ano | findstr ":3000"
netstat -ano | findstr ":8000"

# 终止进程
taskkill /F /PID [进程ID]
```

### Q2: 虚拟环境未找到
**现象**: 提示"虚拟环境不存在"

**解决方案**:
```bash
cd server
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
```

### Q3: npm依赖安装失败
**现象**: 前端依赖安装报错

**解决方案**:
```bash
cd client
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### Q4: 页面显示空白
**现象**: 浏览器打开后页面空白

**解决方案**:
1. 检查浏览器控制台错误（F12）
2. 清除浏览器缓存（Ctrl + Shift + Delete）
3. 硬刷新页面（Ctrl + F5）
4. 检查后端服务是否正常运行
5. 确认API地址正确（http://localhost:8000）

### Q5: 3D模型无法加载
**现象**: 登录页面3D机械螳螂不显示

**解决方案**:
1. 检查 `client/public/*.glb` 文件是否存在
2. 清除浏览器缓存
3. 检查浏览器是否支持WebGL
4. 尝试使用Chrome浏览器

### Q6: 登录失败
**现象**: 输入正确账号密码后无法登录

**解决方案**:
1. 检查后端服务是否运行（http://localhost:8000/docs）
2. 打开浏览器开发者工具查看Network请求
3. 确认用户名和密码正确（admin/admin123）
4. 清除浏览器缓存和Cookie

### Q7: 甘特图无法显示
**现象**: 甘特图页面空白或加载失败

**解决方案**:
1. 检查任务数据是否存在
2. 清除浏览器缓存
3. 查看浏览器控制台错误
4. 确认Canvas API支持

### Q8: 设备选型系统打开空白
**现象**: 点击"设备选型采购"后页面空白

**解决方案**:
1. 确认 `client/public/selection-tools/` 目录文件完整
2. 检查浏览器控制台错误
3. 清除浏览器缓存
4. 硬刷新页面（Ctrl + F5）

---

## 🔄 系统更新

### 更新前端
```bash
cd client
git pull origin main
npm install
npm start
```

### 更新后端
```bash
cd server
git pull origin main
venv\Scripts\activate
pip install -r requirements.txt
python -m uvicorn main:app --reload
```

---

## 🔒 安全建议

### 生产环境部署
1. ✅ 修改默认管理员密码
2. ✅ 启用HTTPS加密通信
3. ✅ 配置防火墙规则
4. ✅ 使用环境变量存储敏感信息
5. ✅ 定期更新系统和依赖包
6. ✅ 设置定期数据备份

### 数据安全
- 💾 每日自动备份数据库
- 🔐 密码使用Bcrypt加密
- 🔑 JWT Token身份验证
- 📝 记录所有关键操作日志

---

## 📊 性能优化建议

### 前端优化
- 使用Chrome或Edge浏览器
- 首次加载时间约3-5秒
- 3D模型自动优化
- 路由懒加载

### 后端优化
- API响应时间 < 100ms
- 支持500+并发请求
- 内存占用约200MB
- 数据库查询优化

---

## 📚 相关文档

- [📘 EPC系统使用指南](./EPC系统使用指南.md) - 详细功能说明
- [📗 README.md](./README.md) - 系统概述
- [📙 API文档](http://localhost:8000/docs) - 后端接口文档

---

## 📞 技术支持

### 日志位置
- **前端日志**: 浏览器开发者工具 Console
- **后端日志**: 终端窗口输出
- **系统日志**: `server/logs/` 目录

### 报告问题时请提供
1. 错误信息截图
2. 浏览器版本
3. Python版本
4. Node.js版本
5. 操作系统版本
6. 操作步骤

---

## ✅ 系统检查清单

### 启动前检查
- [ ] Python 3.8+ 已安装
- [ ] Node.js 14+ 已安装
- [ ] 后端依赖已安装（venv目录存在）
- [ ] 前端依赖已安装（node_modules目录存在）
- [ ] 端口3000未被占用
- [ ] 端口8000未被占用
- [ ] 有网络连接（首次安装需要下载依赖）

### 启动后检查
- [ ] 后端服务无错误输出
- [ ] 前端编译成功
- [ ] 能打开 http://localhost:3000
- [ ] 登录页面正常显示
- [ ] 3D模型正常加载
- [ ] 能成功登录系统
- [ ] 各功能模块正常访问

---

## 🎓 快速上手（5分钟）

### 第一次使用流程

**1. 安装依赖（2分钟）**
```bash
# 后端
cd server
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt

# 前端
cd ../client
npm install
```

**2. 启动系统（1分钟）**
```bash
# 双击运行
启动.bat
```

**3. 登录系统（1分钟）**
- 等待浏览器自动打开
- 用户名: `admin`
- 密码: `admin123`
- 点击"登录系统"

**4. 探索功能（1分钟）**
- 查看数字孪生驾驶舱
- 浏览EPC工程概览
- 体验甘特图功能
- 尝试设备选型工具

---

**系统版本**: v2.0.0  
**文档版本**: v2.0.0  
**最后更新**: 2025-10-18  
**维护状态**: 🟢 积极维护中  

---

**© 2025 EPC Project Management System**  
**Engineering · Procurement · Construction**
