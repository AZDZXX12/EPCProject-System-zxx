# ===========================================
# EPC项目管理系统 - 生产环境配置
# ===========================================
# 复制此文件为 .env.production 并填写实际值

# -------------------------------------------
# 应用配置
# -------------------------------------------
NODE_ENV=production
APP_NAME=EPC项目管理系统
APP_VERSION=2.0.0
APP_DEBUG=false

# -------------------------------------------
# 后端配置
# -------------------------------------------
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# -------------------------------------------
# 数据库配置
# -------------------------------------------
DATABASE_URL=sqlite:///./data/epc_project.db
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_RECYCLE=3600

# 数据库备份
DATABASE_BACKUP_ENABLED=true
DATABASE_BACKUP_INTERVAL=86400
DATABASE_BACKUP_RETENTION_DAYS=30

# -------------------------------------------
# Redis配置
# -------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_SECURE_PASSWORD
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50

# -------------------------------------------
# 安全配置（必须修改！）
# -------------------------------------------
SECRET_KEY=CHANGE_THIS_TO_RANDOM_SECRET_KEY_MINIMUM_32_CHARS
JWT_SECRET=CHANGE_THIS_TO_RANDOM_JWT_SECRET_MINIMUM_32_CHARS
JWT_EXPIRATION=7200
JWT_REFRESH_EXPIRATION=2592000

# CORS配置
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ENABLED=true

# -------------------------------------------
# 日志配置
# -------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/app/logs/epc.log
LOG_MAX_SIZE=100M
LOG_BACKUP_COUNT=10

# -------------------------------------------
# 监控配置
# -------------------------------------------
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
HEALTH_CHECK_PATH=/health

# -------------------------------------------
# 邮件配置（可选）
# -------------------------------------------
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_specific_password
SMTP_FROM=noreply@yourdomain.com
SMTP_TLS=true

# -------------------------------------------
# 对象存储配置（可选，用于文件上传）
# -------------------------------------------
S3_ENABLED=false
S3_BUCKET=epc-uploads
S3_REGION=us-east-1
S3_ACCESS_KEY=your_access_key_id
S3_SECRET_KEY=your_secret_access_key
S3_ENDPOINT=https://s3.amazonaws.com

# -------------------------------------------
# 性能配置
# -------------------------------------------
MAX_UPLOAD_SIZE=50M
REQUEST_TIMEOUT=30
CACHE_TTL=3600
CACHE_DEFAULT_TIMEOUT=300

# -------------------------------------------
# 安全配置
# -------------------------------------------
# 速率限制
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# 会话配置
SESSION_TIMEOUT=3600
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# -------------------------------------------
# 备份配置
# -------------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 3 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_ENABLED=false
BACKUP_S3_BUCKET=epc-backups

# -------------------------------------------
# 第三方服务（可选）
# -------------------------------------------
# Sentry错误追踪
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# Google Analytics
GA_TRACKING_ID=

# -------------------------------------------
# 功能开关
# -------------------------------------------
FEATURE_FILE_UPLOAD=true
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_WEBSOCKET=true
FEATURE_API_DOCS=false

# -------------------------------------------
# 部署信息（自动填充）
# -------------------------------------------
DEPLOY_DATE=
DEPLOY_COMMIT=
DEPLOY_BRANCH=main
