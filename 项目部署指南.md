# 化工项目管理系统 - 部署指南

> **Chemical Project Management System - Deployment Guide**

本文档面向需要部署和使用本系统的用户，提供完整的安装、配置和使用说明。

---

## 📋 目录

- [系统简介](#系统简介)
- [环境要求](#环境要求)
- [快速开始](#快速开始)
- [详细安装步骤](#详细安装步骤)
- [系统使用](#系统使用)
- [常见问题](#常见问题)
- [技术支持](#技术支持)

---

## 🎯 系统简介

**化工项目管理系统** 是一款专为化工设备安装项目设计的管理平台，主要功能包括：

- ✅ **数字孪生驾驶舱** - 3D可视化项目监控
- 📊 **施工进度甘特图** - 每日工作量追踪
- 🔧 **设备安装管理** - 设备进度跟踪
- 🛡️ **安全规章制度** - 安全管理体系
- 🧪 **质量检测记录** - 质量管理追溯
- 👥 **人员管理** - 施工人员档案
- 📚 **技术文档库** - 文档集中管理

---

## 💻 环境要求

### 必需软件

| 软件 | 版本要求 | 下载地址 |
|------|----------|----------|
| **Node.js** | >= 16.0.0 | https://nodejs.org/ |
| **Python** | >= 3.8.0 | https://www.python.org/ |
| **浏览器** | Chrome/Edge 最新版 | - |

### 硬件要求

- **CPU**: 双核及以上
- **内存**: 4GB 及以上
- **硬盘**: 2GB 可用空间
- **网络**: 稳定的网络连接（仅安装时需要）

---

## 🚀 快速开始

### 方式一：Windows 一键启动（推荐）

1. **解压项目文件夹** 到任意位置（路径不要有中文）

2. **双击运行启动脚本**
   - 推荐：右键 `启动.ps1` → 选择"使用 PowerShell 运行"
   - 备选：双击 `启动.bat`

3. **等待启动完成**（约 15-20 秒）

4. **浏览器自动打开** 登录页面
   - 默认用户名：`admin`
   - 默认密码：`admin123`

5. **开始使用** 🎉

### 方式二：手动启动

如果一键启动遇到问题，请查看 [详细安装步骤](#详细安装步骤)。

---

## 📦 详细安装步骤

### 第一步：检查环境

打开命令行（CMD 或 PowerShell），执行以下命令检查：

```bash
# 检查 Node.js 版本
node --version
# 应显示：v16.0.0 或更高

# 检查 Python 版本
python --version
# 应显示：Python 3.8.0 或更高

# 检查 npm 版本
npm --version
# 应显示：8.0.0 或更高
```

如果提示"命令不存在"，请先安装对应软件。

---

### 第二步：后端安装

1. **打开命令行**，进入项目目录

```bash
cd C:\path\to\xiangmu
```

2. **进入后端文件夹**

```bash
cd server
```

3. **创建虚拟环境**（首次安装）

```bash
python -m venv venv
```

4. **激活虚拟环境**

Windows PowerShell:
```powershell
.\venv\Scripts\Activate.ps1
```

Windows CMD:
```cmd
venv\Scripts\activate.bat
```

5. **安装 Python 依赖**

```bash
pip install -r requirements.txt
```

6. **启动后端服务**

```bash
python -m uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

看到以下信息说明后端启动成功：
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

**保持此窗口运行，不要关闭！**

---

### 第三步：前端安装

1. **打开新的命令行窗口**，进入项目目录

```bash
cd C:\path\to\xiangmu
```

2. **进入前端文件夹**

```bash
cd client
```

3. **安装前端依赖**（首次安装，需 5-10 分钟）

```bash
npm install
```

4. **启动前端服务**

```bash
npm start
```

看到以下信息说明前端启动成功：
```
Compiled successfully!

You can now view the app in the browser.

  Local:            http://localhost:3000
```

浏览器会自动打开 `http://localhost:3000`

**保持此窗口运行，不要关闭！**

---

### 第四步：登录系统

1. 浏览器访问：http://localhost:3000/login

2. 输入默认账号：
   - **用户名**: `admin`
   - **密码**: `admin123`

3. 点击"登录"按钮

4. 进入系统主界面

---

## 🎮 系统使用

### 1. 数字孪生驾驶舱

**功能**: 3D 可视化项目概览

**使用说明**:
- 左侧显示 3D 机械螳螂模型（可旋转查看）
- 右侧显示项目统计信息
- 底部显示实时施工日志
- 使用鼠标拖拽旋转 3D 模型
- 滚轮缩放模型

**适用场景**: 项目汇报、领导检查、整体把控

---

### 2. 施工进度甘特图

**功能**: 每日工作量追踪与进度可视化

**使用说明**:

#### 查看甘特图
- 横轴：时间线（日期）
- 纵轴：任务列表
- 彩色横条：任务进度
- 绿点：当日已完成工作
- 黄点：当日未完成工作
- 红色虚线：今日标记

#### 搜索与筛选
- **项目选择**: 顶部下拉框选择不同项目
- **状态筛选**: 全部/已完成/进行中/待开始
- **搜索框**: 输入任务名称快速定位

#### 查看详情
1. **点击任务横条**，右侧弹出详情抽屉
2. 查看任务概览：负责人、状态、日期、进度
3. 查看统计数据：总工作日、已完成天数、总工时
4. 查看每日明细表：
   - 日期
   - 设备名称
   - 工作内容
   - 人员数量
   - 工时
   - 完成状态

#### 导出功能
- **导出 PDF**: 点击"导出PDF"按钮，生成甘特图 PDF 文件
- **导出 Excel**: 点击"导出Excel"按钮（待开发）

#### 缩放功能
- **放大**: 点击"放大"按钮或使用 `Ctrl + 滚轮向上`
- **缩小**: 点击"缩小"按钮或使用 `Ctrl + 滚轮向下`

**适用场景**: 日常进度跟踪、工作量统计、进度汇报

---

### 3. 设备安装管理

**功能**: 化工设备安装进度追踪

**使用说明**:
- 查看设备列表（反应釜、精馏塔、换热器等）
- 查看每台设备的安装进度
- 查看设备状态（运行中/待安装/维护中/已完成）
- 筛选设备类型
- 搜索设备编号或名称

**适用场景**: 设备管理、安装进度追踪

---

### 4. 安全规章制度

**功能**: 化工项目安全管理

**使用说明**:
- 查看安全规章制度列表
- 查看安全统计数据
- 查看紧急联系人
- 下载安全手册

**适用场景**: 安全培训、应急响应、制度查询

---

### 5. 质量检测记录

**功能**: 质量检测数据管理

**使用说明**:
- 查看检测记录列表
- 按状态筛选（合格/不合格/待检测）
- 按设备类型筛选
- 查看检测统计数据

**适用场景**: 质量追溯、检测管理、质量报告

---

### 6. 人员管理

**功能**: 施工人员档案管理

**使用说明**:
- 查看人员列表
- 查看人员证书信息
- 查看工作经验
- 查看考勤记录
- 按工种筛选

**适用场景**: 人员调配、资质管理、考勤统计

---

### 7. 技术文档库

**功能**: 项目文档集中管理

**使用说明**:
- 查看文档列表
- 按类别筛选（设计图纸/施工方案/技术标准等）
- 搜索文档
- 下载文档
- 查看文档版本

**适用场景**: 文档查阅、技术交底、资料归档

---

## ❓ 常见问题

### Q1: 启动脚本提示"端口被占用"怎么办？

**答**: 启动脚本会自动关闭占用端口的进程。如果仍有问题：

**手动关闭端口占用**:

1. 打开命令行，执行：
```bash
# 查找占用 8000 端口的进程
netstat -ano | findstr :8000

# 记下最后一列的 PID 号（例如 12345）
# 关闭进程
taskkill /F /PID 12345
```

2. 同样方法关闭 3000 端口

3. 重新运行启动脚本

---

### Q2: 浏览器打开后页面空白怎么办？

**答**: 可能是前端还在编译中，请等待 30-60 秒。如果仍空白：

1. 按 `F12` 打开开发者工具
2. 查看控制台（Console）是否有错误
3. 刷新页面（`Ctrl + F5` 强制刷新）
4. 如果仍有问题，重启前端服务

---

### Q3: 后端提示"虚拟环境不存在"怎么办？

**答**: 需要先创建虚拟环境：

```bash
cd server
python -m venv venv
```

然后重新启动。

---

### Q4: npm install 报错怎么办？

**答**: 可能是网络问题，尝试以下方案：

**方案 1**: 切换 npm 镜像源
```bash
npm config set registry https://registry.npmmirror.com
npm install
```

**方案 2**: 清除缓存重试
```bash
npm cache clean --force
npm install
```

**方案 3**: 删除 node_modules 重装
```bash
rmdir /s /q node_modules
npm install
```

---

### Q5: 3D 模型无法显示怎么办？

**答**: 确认以下文件存在：

- `client/public/8fb25db3-c21e-4797-a2db-a370ba039846.glb`

如果文件缺失，请从项目源文件中复制。

---

### Q6: 如何修改登录密码？

**答**: 当前版本使用前端验证，暂不支持修改密码。未来版本将支持数据库用户管理。

---

### Q7: 如何停止系统？

**答**: 

**使用一键启动脚本**:
- 关闭"Backend-Server"窗口
- 关闭"Frontend-Server"窗口

**手动启动**:
- 在后端窗口按 `Ctrl + C`
- 在前端窗口按 `Ctrl + C`

---

### Q8: 数据会保存吗？

**答**: 当前版本使用演示数据（存储在内存中），重启后数据会重置。如需持久化存储，请联系技术支持配置数据库。

---

### Q9: 可以在其他电脑访问吗？

**答**: 可以！确保两台电脑在同一局域网内：

1. 在服务器电脑查看 IP 地址：
```bash
ipconfig
# 找到 IPv4 地址，例如：192.168.1.100
```

2. 在其他电脑浏览器访问：
```
http://192.168.1.100:3000/login
```

3. 如果无法访问，检查防火墙设置

---

### Q10: 系统支持哪些浏览器？

**答**: 

**推荐浏览器**:
- ✅ Google Chrome（最新版）
- ✅ Microsoft Edge（最新版）

**不推荐**:
- ❌ Internet Explorer（不支持）
- ⚠️ Firefox（部分 3D 功能可能不稳定）

---

## 🔧 技术支持

### 系统访问地址

| 服务 | 地址 | 说明 |
|------|------|------|
| 前端界面 | http://localhost:3000 | 用户界面 |
| 后端 API | http://localhost:8000 | 后端服务 |
| API 文档 | http://localhost:8000/docs | Swagger 文档 |

### 默认账号

| 字段 | 值 |
|------|------|
| 用户名 | admin |
| 密码 | admin123 |

### 文件结构

```
xiangmu/
├── client/                 # 前端项目
│   ├── public/            # 静态资源
│   ├── src/               # 源代码
│   └── package.json       # 依赖配置
├── server/                # 后端项目
│   ├── main.py           # 主程序
│   ├── requirements.txt  # Python 依赖
│   └── venv/             # 虚拟环境
├── 启动.bat               # Windows 批处理启动脚本
├── 启动.ps1               # PowerShell 启动脚本
└── 项目部署指南.md        # 本文档
```

### 日志位置

- **后端日志**: 查看"Backend-Server"窗口
- **前端日志**: 查看"Frontend-Server"窗口
- **浏览器日志**: 按 `F12` → Console 标签

---

## 📞 联系方式

如遇到本文档未覆盖的问题，请联系技术支持。

---

## 📄 版本信息

- **系统版本**: v1.0.0
- **更新日期**: 2024-10-17
- **技术栈**: React + TypeScript + FastAPI + Python

---

## ⚖️ 使用许可

本系统仅供内部使用，未经授权不得用于商业用途。

---

**祝您使用愉快！** 🎉

